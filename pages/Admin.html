<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | FarmPick</title>
    <link rel="stylesheet" href="/styles/admin.css">
    <link rel="stylesheet" href="/styles/navbar-shared.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
    <!-- Admin layout starts here (Navbar removed as requested) -->
    <div class="admin-layout" style="margin-top: 0;">
        <style>
            /* Custom styles for the new Reject button and layout fix */
            .sidebar {
                top: 0 !important;
                height: 100vh !important;
                z-index: 1000;
                transition: all 0.3s ease;
            }

            .main-content {
                margin-left: 280px !important;
                min-height: 100vh !important;
                transition: all 0.3s ease;
            }

            .btn-reject {
                background: #ef4444;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 8px;
                font-weight: 700;
                cursor: pointer;
                transition: 0.3s;
                margin-left: 5px;
            }

            .btn-reject:hover {
                background: #dc2626;
                transform: scale(1.05);
            }

            /* Responsive Adjustments */
            .menu-toggle {
                display: none;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: #1f2937;
            }

            @media (max-width: 768px) {
                .sidebar {
                    left: -280px;
                    width: 280px !important;
                }

                .sidebar.active {
                    left: 0;
                }

                .main-content {
                    margin-left: 0 !important;
                }

                .menu-toggle {
                    display: block;
                    margin-right: 15px;
                }

                .top-bar {
                    padding: 15px 20px !important;
                }

                .content-container {
                    padding: 20px !important;
                }

                .stats-grid {
                    grid-template-columns: 1fr !important;
                }

                .sidebar-header .logo-text {
                    display: block !important;
                }

                .nav-item span {
                    display: block !important;
                }
            }
        </style>
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <span class="logo-icon">ðŸŒ±</span>
                <span class="logo-text">FarmPick<span class="admin-badge">Admin</span></span>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-tab="dashboard">
                    <i class="fa-solid fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-tab="approvals">
                    <i class="fa-solid fa-user-check"></i>
                    <span>Seller Approvals</span>
                    <span class="pending-count">0</span>
                </a>
                <a href="#" class="nav-item" data-tab="farmers">
                    <i class="fa-solid fa-wheat-awn"></i>
                    <span>Verified Farmers</span>
                </a>
                <a href="#" class="nav-item" data-tab="users">
                    <i class="fa-solid fa-users"></i>
                    <span>All Users</span>
                </a>
                <a href="#" class="nav-item" data-tab="messages">
                    <i class="fa-solid fa-envelope-open-text"></i>
                    <span>Inquiries</span>
                    <span class="msg-count">0</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <a href="/index.html" class="logout-btn">
                    <i class="fa-solid fa-house"></i>
                    <span>Back to Home</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div style="display: flex; align-items: center;">
                    <button class="menu-toggle" onclick="toggleAdminSidebar()"><i class="fa-solid fa-bars"></i></button>
                    <h2 id="tab-title">Admin Dashboard</h2>
                </div>
                <div class="admin-profile">
                    <span class="admin-label-desktop">Admin Panel</span>
                    <div class="profile-circle">A</div>
                </div>
            </header>

            <div class="content-container">
                <!-- Dashboard Tab -->
                <section id="dashboard-tab" class="tab-pane active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon blue-bg"><i class="fa-solid fa-users"></i></div>
                            <div class="stat-info">
                                <h3 id="total-users">0</h3>
                                <p>Total Users</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon green-bg"><i class="fa-solid fa-wheat-awn"></i></div>
                            <div class="stat-info">
                                <h3 id="total-farmers">0</h3>
                                <p>Verified Farmers</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon orange-bg"><i class="fa-solid fa-clock"></i></div>
                            <div class="stat-info">
                                <h3 id="pending-approvals">0</h3>
                                <p>Pending Requests</p>
                            </div>
                        </div>
                    </div>

                    <div class="recent-section">
                        <h3>Quick Overview</h3>
                        <div class="chart-placeholder">
                            <p>Revenue and User growth charts will appear here.</p>
                        </div>
                    </div>
                </section>

                <!-- Approvals Tab -->
                <section id="approvals-tab" class="tab-pane">
                    <div class="table-card">
                        <div class="table-header">
                            <h3>Pending Seller Requests</h3>
                            <button class="btn btn-refresh" onclick="loadApprovals()"><i class="fa-solid fa-rotate"></i>
                                Refresh</button>
                        </div>
                        <div class="table-responsive">
                            <table id="approvals-table">
                                <thead>
                                    <tr>
                                        <!-- Added Photo column to see farmer's field -->
                                        <th>Farm Photo</th>
                                        <th>Farm Name</th>
                                        <th>Location</th>
                                        <th>Contact</th>
                                        <th>Aadhaar No.</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Dynamic Rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Farmers Tab -->
                <section id="farmers-tab" class="tab-pane">
                    <div class="table-card">
                        <div class="table-header">
                            <h3>Verified Farmers List</h3>
                        </div>
                        <div class="table-responsive">
                            <table id="farmers-table">
                                <thead>
                                    <tr>
                                        <th>Farm Name</th>
                                        <th>Location</th>
                                        <th>Contact</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Dynamic Rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Users Tab -->
                <section id="users-tab" class="tab-pane">
                    <div class="table-card">
                        <div class="table-header">
                            <h3>All Platform Users</h3>
                        </div>
                        <div class="table-responsive">
                            <table id="users-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Role</th>
                                        <th>Joined Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Dynamic Rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Messages Tab -->
                <section id="messages-tab" class="tab-pane">
                    <div class="table-card">
                        <div class="table-header">
                            <h3>Customer Inquiries</h3>
                        </div>
                        <div class="table-responsive">
                            <table id="messages-table">
                                <thead>
                                    <tr>
                                        <th>Customer</th>
                                        <th>Email</th>
                                        <th>Category</th>
                                        <th>Subject</th>
                                        <th>Message</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Dynamic Rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script type="module" src="/js/admin.js"></script>
    <script type="module" src="/js/main.js"></script>
    <script>
        function toggleAdminSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        // Close sidebar when clicking on a nav item (mobile)
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    document.getElementById('sidebar').classList.remove('active');
                }
            });
        });
    </script>
</body>

</html>